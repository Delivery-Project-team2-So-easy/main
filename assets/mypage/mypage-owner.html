<!DOCTYPE html>
<html lang="en">
  <head>
    <base href="/" />
    <title>마이페이지</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      /* 스타일을 추가할 수 있습니다 */
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 0;
      }
      header {
        background-color: #4caf50;
        color: #fff;
        text-align: center;
        padding: 1rem;
      }
      main {
        padding: 2rem;
      }
      .profile {
        display: flex;
        align-items: center;
        gap: 1rem;
      }
      .profile img {
        width: 100px;
        border-radius: 50%;
      }

      .review {
        border: 1px solid #ddd;
        padding: 10px;
        margin-bottom: 20px;
      }
      .review h3 {
        margin-bottom: 10px;
      }
      .review img {
        width: 80px;
        height: 80px; /* 높이를 추가 */
        object-fit: cover; /* 이미지 비율 유지하면서 지정한 크기에 맞추기 */
        border-radius: 50%;
      }
      .button-container {
        display: flex;
        justify-content: space-between;
      }
      .edit-button,
      .delete-button {
        padding: 5px 10px;
        background-color: #4caf50;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }
      /* 모달창 */
      .modal-container {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        justify-content: center;
        align-items: center;
      }

      .modal-content {
        background-color: #fff;
        padding: 20px;
        border-radius: 10px;
        width: 300px;
        display: flex;
        flex-direction: column; /* 요소들을 수직 방향으로 배치 */
        align-items: center; /* 가운데 정렬 */
      }
      /* 상점 */
      .shop-container {
        display: flex;
        align-items: center;
        gap: 20px; /* 요소 사이의 간격 조정 */
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        margin: 10px;
      }
      .shop-image {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        object-fit: cover;
      }
      .shop-name {
        flex: 1; /* 상점 이름이 남은 공간 모두를 차지하도록 설정 */
      }
      .register-button,
      .edit-button {
        padding: 8px 16px;
        border: none;
        border-radius: 5px;
        background-color: #4caf50;
        color: #fff;
        cursor: pointer;
      }

      .menu-button,
      .order-button {
        padding: 8px 16px;
        border: none;
        border-radius: 5px;
        background-color: #66b4ef;
        color: #fff;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>마이페이지</h1>
    </header>
    <main>
      <div class="profile" id="profile">
        <img
          src="https://d2u3dcdbebyaiu.cloudfront.net/uploads/atch_img/309/59932b0eb046f9fa3e063b8875032edd_crop.jpeg"
          alt="https://d2u3dcdbebyaiu.cloudfront.net/uploads/atch_img/309/59932b0eb046f9fa3e063b8875032edd_crop.jpeg"
        />
        <div>
          <h2>사용자 이름</h2>
          <p>이메일</p>
          <p>소비자 혹은 판매자</p>
          <p>address</p>
          <!-- 사용자 정보 및 프로필 사진 표시 등 추가 정보를 넣을 수 있습니다 -->
        </div>
      </div>
      <div class="shop-container" id="storeProfile">
        <img
          class="shop-image"
          src="https://src.hidoc.co.kr/image/lib/2021/6/30/1625033464239_0.jpg"
          alt="https://src.hidoc.co.kr/image/lib/2021/6/30/1625033464239_0.jpg"
        />
        <div class="shop-name">상점 이름 1</div>
        <button class="register-button">상점 등록</button>
        <button class="edit-button">상점 수정</button>
        <button class="edit-button">메뉴 관리</button>
        <button class="edit-button">주문 조회</button>
      </div>

      <div class="review-container">
        <div class="review">
          <h3>리뷰 1</h3>
          <p>제품 A는 좋았어요! 가격 대비 품질이 좋습니다.</p>
          <div class="button-container">
            <button class="edit-button">수정</button>
            <button class="delete-button">삭제</button>
          </div>
        </div>
      </div>
    </main>
    <script>
      // 데이터 렌더링
      window.addEventListener('DOMContentLoaded', () => {
        // 내 프로필 렌더링
        fetch('/userDetails', {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json',
          },
        })
          .then((response) => response.json())
          .then((data) => {
            if (data.errorMessage) {
              alert(data.errorMessage);
            }
            const profile = document.querySelector('.profile');
            const storeProfile = document.querySelector('.shop-container');
            const myProfile = data.data;
            const myStoreProfile = data.data.Store;
            if (myProfile.profileImg == null) {
              myProfile.profileImg = `https://i.namu.wiki/i/Ln7MiLrZm65kiItiQWdvJQpIaRJ5NZpvg9XZ08hFBTai0imKv6UaRRFCYUefmKOP8rdCwdBiwOm_aFTYo6Ib7A.webp`;
            }
            if (myProfile.is_seller) {
              myProfile.is_seller = '판매자';
            } else {
              myProfile.is_seller = '소비자';
            }
            if (myStoreProfile.store_img == null) {
              myStoreProfile.store_img = `https://d2u3dcdbebyaiu.cloudfront.net/uploads/atch_img/309/59932b0eb046f9fa3e063b8875032edd_crop.jpeg`;
            }
            let temp_html = `
          <img
            src="${myProfile.profileImg}"
          />
          <div>
          <h2>이름 : ${myProfile.name}</h2>
          <p>이메일 : ${myProfile.email}</p>
          <p>가입 유형 : ${myProfile.is_seller}</p>
          <p>주소 : ${myProfile.address}</p>
          <p>내 포인트 : ${myProfile.point}</p>
        </div>
        `;
            profile.innerHTML = temp_html;

            let temp_html_v2 = `
          <img
            class="shop-image"
            src="${myStoreProfile.store_img}"
            alt="${myStoreProfile.store_img}"
          />
          <div class="shop-name">${myStoreProfile.store_name}</div>
          <button class="register-button">상점 등록</button>
          <button class="edit-button">상점 수정</button>
          <button class="menu-button">메뉴 관리</button>
        <button class="order-button">주문 조회</button>
            `;
            storeProfile.innerHTML = temp_html_v2;
          });
      });
      window.addEventListener('DOMContentLoaded', () => {
        fetch('/order', {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json',
          },
        })
          .then((response) => response.json())
          .then((data) => {
            console.log(data);
          });
      });
    </script>
  </body>
</html>
