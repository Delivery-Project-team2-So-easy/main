<!DOCTYPE html>
<html lang="en">
  <head>
    <base href="/" />
    <title>마이페이지</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      /* 스타일을 추가할 수 있습니다 */
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 0;
      }
      header {
        background-color: #4caf50;
        color: #fff;
        text-align: center;
        padding: 1rem;
      }
      main {
        padding: 2rem;
      }
      .profile {
        display: flex;
        align-items: center;
        gap: 1rem;
      }
      .profile img {
        width: 100px;
        border-radius: 50%;
      }

      .review {
        border: 1px solid #ddd;
        padding: 10px;
        margin-bottom: 20px;
      }
      .review h3 {
        margin-bottom: 10px;
      }
      .button-container {
        display: flex;
        justify-content: space-between;
      }
      .edit-button,
      .delete-button {
        padding: 5px 10px;
        background-color: #4caf50;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>마이페이지</h1>
    </header>
    <main>
      <div class="profile">
        <img
          src="https://i.namu.wiki/i/Ln7MiLrZm65kiItiQWdvJQpIaRJ5NZpvg9XZ08hFBTai0imKv6UaRRFCYUefmKOP8rdCwdBiwOm_aFTYo6Ib7A.webp"
          alt="https://i.namu.wiki/i/Ln7MiLrZm65kiItiQWdvJQpIaRJ5NZpvg9XZ08hFBTai0imKv6UaRRFCYUefmKOP8rdCwdBiwOm_aFTYo6Ib7A.webp"
        />
        <div>
          <h2>사용자 이름</h2>
          <p>이메일</p>
          <p>소비자 혹은 판매자</p>
          <p>address</p>
          <!-- 사용자 정보 및 프로필 사진 표시 등 추가 정보를 넣을 수 있습니다 -->
        </div>
      </div>
      <div class="review-container">
        <div class="review">
          <h3>리뷰 1</h3>
          <p>제품 A는 좋았어요! 가격 대비 품질이 좋습니다.</p>
          <div class="button-container">
            <button class="edit-button">수정</button>
            <button class="delete-button">삭제</button>
          </div>
        </div>

        <div class="review">
          <h3>리뷰 2</h3>
          <p>제품 B는 별로였어요. 기대한 만큼의 성능이 나오지 않았습니다.</p>
          <div class="button-container">
            <button class="edit-button">수정</button>
            <button class="delete-button">삭제</button>
          </div>
        </div>

        <div class="review">
          <h3>리뷰 3</h3>
          <p>제품 C는 괜찮았어요. 디자인이 마음에 듭니다.</p>
          <div class="button-container">
            <button class="edit-button">수정</button>
            <button class="delete-button">삭제</button>
          </div>
        </div>
        <div class="review">
          <h3>리뷰 4</h3>
          <p>제품 뭐야는 괜찮았어요. 디자인이 마음에 듭니다.</p>
          <div class="button-container">
            <button class="edit-button">수정</button>
            <button class="delete-button">삭제</button>
          </div>
        </div>
      </div>
      <!-- 기타 마이페이지 내용을 넣을 수 있습니다 -->
    </main>
    <script>
      window.addEventListener('DOMContentLoaded', () => {
        fetch('/userDetails', {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json',
          },
        })
          .then((response) => response.json())
          .then((data) => {
            const profile = document.querySelector('.profile');
            const myProfile = data.data;
            if (data.data.profileImg == null) {
              data.data.profileImg = `https://i.namu.wiki/i/Ln7MiLrZm65kiItiQWdvJQpIaRJ5NZpvg9XZ08hFBTai0imKv6UaRRFCYUefmKOP8rdCwdBiwOm_aFTYo6Ib7A.webp`;
            }
            if (data.data.is_seller) {
              data.data.is_seller = '판매자';
            } else {
              data.data.is_seller = '소비자';
            }
            let temp_html = `
          <img
            src="${data.data.profileImg}"
          />
          <div>
          <h2>${data.data.name}</h2>
          <p>${data.data.email}</p>
          <p>${data.data.is_seller}</p>
          <p>${data.data.address}</p>
        </div>
        `;
            profile.innerHTML = temp_html;
          })
          .catch((error) => {
            console.log(error);
            alert(error);
          });
        fetch('/');
      });
      const editButton = document.querySelector('#edit-button');
      editButton.addEventListener('click', () => {
        fetch('/users/checkEmail', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            email: inputEmail.value,
          }),
        })
          .then((response) => {
            return response.json();
          })
          .then((data) => {
            if (data.errorMessage) alert(data.errorMessage);
            else {
              alert(data.message);
              authenticationNumberToEmail = data.data;
              emailCheckForm.style.display = '';
            }
          })
          .catch((error) => {
            console.error('Error:', error);
            alert('오류');
          });
      });
    </script>
  </body>
</html>
